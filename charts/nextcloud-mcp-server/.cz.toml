[tool.commitizen]
name = "cz_conventional_commits"
version = "0.57.18"
tag_format = "nextcloud-mcp-server-$version"
version_scheme = "semver"
update_changelog_on_bump = true
major_version_zero = true

# Update chart version only (NOT appVersion)
version_files = [
    "Chart.yaml:^version:"
]

# Ignore tags from other components
ignored_tag_formats = [
    "v*",              # MCP server tags
    "astrolabe-v*",    # Astrolabe tags
]

# Filter commits by scope
# Includes helm-scoped commits AND MCP server version bumps (which update appVersion)
[tool.commitizen.customize]
changelog_pattern = "^((feat|fix|docs|refactor|perf|test|build|ci|chore)\\(helm\\)(!)?:|bump: version.*â†’.*)"
schema_pattern = "^(feat|fix|docs|refactor|perf|test|build|ci|chore)\\(helm\\)(!)?:\\s.+"
message_template = "{{change_type}}(helm): {{message}}"
